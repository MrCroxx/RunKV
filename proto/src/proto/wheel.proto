syntax = "proto3";

package wheel;

import "meta.proto";

// ***** inner service *****

message UpdateKeyRangesRequest {
  repeated meta.KeyRange key_ranges = 1;
}

message UpdateKeyRangesResponse {}

service WheelService {
  rpc UpdateKeyRanges(UpdateKeyRangesRequest) returns (UpdateKeyRangesResponse);
}

// ***** raft service *****

message AppendEntriesRequest {
  uint64 id = 1;
  bytes data = 2;
}

message AppendEntriesResponse {
  uint64 id = 1;
  bytes data = 2;
}

message InstallSnapshotRequest {
  uint64 id = 1;
  bytes data = 2;
}

message InstallSnapshotResponse {
  uint64 id = 1;
  bytes data = 2;
}

message VoteRequest {
  uint64 id = 1;
  bytes data = 2;
}

message VoteResponse {
  uint64 id = 1;
  bytes data = 2;
}

service RaftService {
  rpc AppendEntries(AppendEntriesRequest) returns (AppendEntriesResponse);
  rpc InstallSnapshot(InstallSnapshotRequest) returns (InstallSnapshotResponse);
  rpc Vote(VoteRequest) returns (VoteResponse);
}
